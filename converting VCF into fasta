Converting the vcf file (MT) into fasta format


#!/bin/bash

# Input VCF file and reference FASTA file
VCF="renamed_genome_asia_mt.vcf.gz"
REFERENCE="rCRS.fasta"

# File containing the sample names
SAMPLES_FILE="consensus_name"

# Loop through each sample in the samples.txt file
while read SAMPLE; do
    # Run bcftools consensus to generate consensus sequence for each sample
    echo "Generating consensus for sample: $SAMPLE"
    bcftools consensus -s "$SAMPLE" "$VCF" -f "$REFERENCE" > "${SAMPLE}_consensus.fasta"
done < "$SAMPLES_FILE"

### Once this is done, you will several file name base on vcf sample file, but inside fasta all will be like >MT (or whatever chromosome or name), hence below command run separetely to change name by default ####


for f in *.fasta; do
    base=$(basename "$f" .fasta)           # extract SRR ID from filename
    sed -i "s/^>MT/>$base/" "$f"          # replace >MT with >SRR_ID
done
